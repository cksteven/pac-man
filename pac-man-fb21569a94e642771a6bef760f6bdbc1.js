"use strict"
define("pac-man/app",["exports","pac-man/resolver","ember-load-initializers","pac-man/config/environment"],function(e,t,i,n){Object.defineProperty(e,"__esModule",{value:!0})
var r=Ember.Application.extend({modulePrefix:n.default.modulePrefix,podModulePrefix:n.default.podModulePrefix,Resolver:t.default});(0,i.default)(r,n.default.modulePrefix),e.default=r}),define("pac-man/components/pac-man",["exports","ember-keyboard-shortcuts/mixins/component","pac-man/mixins/shared-stuff","pac-man/models/pac","pac-man/models/level","pac-man/models/level2","pac-man/models/teleport-level","pac-man/models/ghost"],function(e,t,i,n,r,a,o,s){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Component.extend(t.default,i.default,{didInsertElement:function(){this.startNewLevel(),this.loop()},startNewLevel:function(){var e=this.loadNewLevel()
e.restart(),this.set("level",e)
var t=n.default.create({level:e,x:e.get("startingPac.x"),y:e.get("startingPac.y")})
this.set("pac",t)
var i=e.get("startingGhosts").map(function(i){return s.default.create({level:e,x:i.x,y:i.y,pac:t})})
this.set("ghosts",i)},levels:[o.default,r.default,a.default],levelNumber:1,score:0,lives:3,loadNewLevel:function(){var e=(this.get("levelNumber")-1)%this.get("levels.length")
return this.get("levels")[e].create()},drawWall:function(e,t){var i=this.get("ctx"),n=this.get("level.squareSize")
i.fillStyle="#000",i.fillRect(e*n,t*n,n,n)},drawPellet:function(e,t){this.drawCircle(e,t,6,"stopped")},drawPowerPellet:function(e,t){this.drawCircle(e,t,4,"stopped","green")},drawlayout:function(){var e=this
this.get("level.layout").forEach(function(t,i){t.forEach(function(t,n){1==t&&e.drawWall(n,i),2==t&&e.drawPellet(n,i),3==t&&e.drawPowerPellet(n,i)})})},clearScreen:function(){this.get("ctx").clearRect(0,0,this.get("level.pixelWidth"),this.get("level.pixelHeight"))},processAnyPellets:function(){var e=this.get("pac.x"),t=this.get("pac.y"),i=this.get("level.layout")
2==i[t][e]?(i[t][e]=0,this.incrementProperty("score"),this.get("level").isComplete()&&(this.incrementProperty("levelNumber"),this.startNewLevel())):3==i[t][e]&&(i[t][e]=0,this.set("pac.powerModeTime",this.get("pac.maxPowerModeTime")))},detectGhostCollisions:function(){var e=this
return this.get("ghosts").filter(function(t){return e.get("pac.x")==t.get("x")&&e.get("pac.y")==t.get("y")})},loop:function(){this.get("pac").move(),this.get("ghosts").forEach(function(e){e.move()}),this.processAnyPellets(),this.clearScreen(),this.drawlayout(),this.get("pac").draw(),this.get("ghosts").forEach(function(e){e.draw()})
var e=this.detectGhostCollisions()
e.length>0&&(this.get("pac.powerMode")?e.forEach(function(e){return e.retreat()}):(this.decrementProperty("lives"),this.restart())),Ember.run.later(this,this.loop,1e3/60)},restart:function(){this.get("lives")<=0&&(this.set("score",0),this.set("lives",3),this.set("levelNumber",1),this.startNewLevel()),this.get("pac").restart(),this.get("ghosts").forEach(function(e){return e.restart()})},keyboardShortcuts:{up:function(){this.set("pac.intent","up")},down:function(){this.set("pac.intent","down")},left:function(){this.set("pac.intent","left")},right:function(){this.set("pac.intent","right")}}})}),define("pac-man/helpers/app-version",["exports","pac-man/config/environment","ember-cli-app-version/utils/regexp"],function(e,t,i){function n(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.default.APP.version,a=n.versionOnly||n.hideSha,o=n.shaOnly||n.hideVersion,s=null
return a&&(n.showExtended&&(s=r.match(i.versionExtendedRegExp)),s||(s=r.match(i.versionRegExp))),o&&(s=r.match(i.shaRegExp)),s?s[0]:r}Object.defineProperty(e,"__esModule",{value:!0}),e.appVersion=n,e.default=Ember.Helper.helper(n)}),define("pac-man/helpers/pluralize",["exports","ember-inflector/lib/helpers/pluralize"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("pac-man/helpers/singularize",["exports","ember-inflector/lib/helpers/singularize"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("pac-man/initializers/app-version",["exports","ember-cli-app-version/initializer-factory","pac-man/config/environment"],function(e,t,i){Object.defineProperty(e,"__esModule",{value:!0})
var n=void 0,r=void 0
i.default.APP&&(n=i.default.APP.name,r=i.default.APP.version),e.default={name:"App Version",initialize:(0,t.default)(n,r)}}),define("pac-man/initializers/container-debug-adapter",["exports","ember-resolver/resolvers/classic/container-debug-adapter"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"container-debug-adapter",initialize:function(){var e=arguments[1]||arguments[0]
e.register("container-debug-adapter:main",t.default),e.inject("container-debug-adapter:main","namespace","application:main")}}}),define("pac-man/initializers/ember-data",["exports","ember-data/setup-container","ember-data"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ember-data",initialize:t.default}}),define("pac-man/initializers/export-application-global",["exports","pac-man/config/environment"],function(e,t){function i(){var e=arguments[1]||arguments[0]
if(!1!==t.default.exportApplicationGlobal){var i
if("undefined"!=typeof window)i=window
else if("undefined"!=typeof global)i=global
else{if("undefined"==typeof self)return
i=self}var n,r=t.default.exportApplicationGlobal
n="string"==typeof r?r:Ember.String.classify(t.default.modulePrefix),i[n]||(i[n]=e,e.reopen({willDestroy:function(){this._super.apply(this,arguments),delete i[n]}}))}}Object.defineProperty(e,"__esModule",{value:!0}),e.initialize=i,e.default={name:"export-application-global",initialize:i}}),define("pac-man/instance-initializers/ember-data",["exports","ember-data/initialize-store-service"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"ember-data",initialize:t.default}}),define("pac-man/mixins/movement",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Mixin.create({x:null,y:null,level:null,direction:"down",timers:["powerModeTime"],pathBlockedInDirection:function(e){var t=this.cellTypeInDirection(e)
return Ember.isEmpty(t)||1===t},cellTypeInDirection:function(e){var t=this.nextCoordinate("x",e),i=this.nextCoordinate("y",e)
return this.get("level.layout."+i+"."+t)},nextCoordinate:function(e,t){return this.get(e)+this.get("directions."+t+"."+e)},animationCompleted:function(){return this.get("frameCycle")==this.get("framesPerMovement")},finalizeMove:function(){var e=this.get("direction")
this.set("x",this.nextCoordinate("x",e)),this.set("y",this.nextCoordinate("y",e)),this.set("frameCycle",1)},tickTimers:function(){var e=this
this.get("timers").forEach(function(t){e.get(t)>0&&e.decrementProperty(t)})},move:function(){this.get("removed")||(this.animationCompleted()?(this.finalizeMove(),this.changeDirection()):"stopped"==this.get("direction")?this.changeDirection():this.incrementProperty("frameCycle")),this.tickTimers()}})}),define("pac-man/mixins/shared-stuff",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Mixin.create({frameCycle:1,framesPerMovement:30,directions:{up:{x:0,y:-1},down:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0},stopped:{x:0,y:0}},ctx:Ember.computed(function(){return document.getElementById("myCanvas").getContext("2d")}),offsetFor:function(e,t){var i=this.get("frameCycle")/this.get("framesPerMovement")
return this.get("directions."+t+"."+e)*i},drawCircle:function(e,t,i,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#000",a=this.get("ctx"),o=this.get("level.squareSize"),s=(e+.5+this.offsetFor("x",n))*o,l=(t+.5+this.offsetFor("y",n))*o
a.fillStyle=r,a.beginPath(),a.arc(s,l,o/i,0,2*Math.PI,!1),a.closePath(),a.fill()}})}),define("pac-man/models/ghost",["exports","pac-man/mixins/shared-stuff","pac-man/mixins/movement"],function(e,t,i){Object.defineProperty(e,"__esModule",{value:!0})
var n=function(){return function(e,t){if(Array.isArray(e))return e
if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,r=!1,a=void 0
try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return i}(e,t)
throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()
e.default=Ember.Object.extend(t.default,i.default,{removed:Ember.computed.gt("retreatTime",0),retreatTime:0,maxRetreatTime:500,timers:["retreatTime"],retreat:function(){this.set("retreatTime",this.get("maxRetreatTime")),this.set("frameCycle",0),this.set("x",this.get("level.ghostRetreat.x")),this.set("y",this.get("level.ghostRetreat.y"))},color:Ember.computed("retreatTime",function(){var e=this.get("retreatTime")/this.get("maxRetreatTime"),t={r:0,g:0,b:0},i={r:100,g:40,b:40},r=["r","g","b"].map(function(n){var r=t[n]*e+i[n]*(1-e)
return Math.round(r)}),a=n(r,3)
return"rgb("+a[0]+"%,"+a[1]+"%,"+a[2]+"%)"}),draw:function(){var e=this.get("x"),t=this.get("y")
this.drawCircle(e,t,2,this.get("direction"),this.get("color"))},init:function(){return this.set("startingX",this.get("x")),this.set("startingY",this.get("y")),this._super.apply(this,arguments)},restart:function(){this.set("x",this.get("startingX")),this.set("y",this.get("startingY")),this.set("frameCycle",0),this.set("direction","stopped")},chanceOfPacmanIfInDirection:function(e){if(this.pathBlockedInDirection(e))return 0
var t=(this.get("pac.y")-this.get("y"))*this.get("directions."+e+".y")+(this.get("pac.x")-this.get("x"))*this.get("directions."+e+".x")
return this.get("pac.powerMode")&&(t*=-1),Math.max(t,0)+.2},getRandomItem:function(e,t){for(var i=t.reduce(function(e,t,i,n){return e+t}),n=Math.random()*i,r=0,a=0;a<e.length;a++)if(r+=t[a],n<(r=Number(r.toFixed(2))))return e[a]},changeDirection:function(){var e=this,t=["left","right","up","down"],i=t.map(function(t){return e.chanceOfPacmanIfInDirection(t)}),n=this.getRandomItem(t,i)
this.set("direction",n)}})}),define("pac-man/models/level",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.Object.extend({startingPac:{x:2,y:1},teleport:!0,squareSize:60,layout:[[2,2,2,2,2,2,2,1],[2,1,2,1,2,2,2,1],[2,2,1,2,2,2,2,1],[2,2,2,2,2,2,2,1],[2,2,2,2,2,2,2,1],[1,2,2,2,2,2,2,1]],startingGhosts:[{x:0,y:0}],width:Ember.computed(function(){return this.get("layout.firstObject.length")}),height:Ember.computed(function(){return this.get("layout.length")}),pixelWidth:Ember.computed(function(){return this.get("width")*this.get("squareSize")}),pixelHeight:Ember.computed(function(){return this.get("height")*this.get("squareSize")}),isComplete:function(){var e=!1
return this.get("layout").forEach(function(t){t.forEach(function(t){2==t&&(e=!0)})}),!e},restart:function(){var e=jQuery.extend(!0,[],this.get("layout"))
this.set("layout",e)}})}),define("pac-man/models/level2",["exports","pac-man/models/level"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({startingPac:{x:0,y:3},startingGhosts:[{x:0,y:0},{x:5,y:0}],teleport:!0,squareSize:60,layout:[[2,2,2,2,2,2,2,2,2],[2,1,1,2,1,2,1,1,2],[2,1,2,2,2,2,2,1,2],[2,2,2,1,1,1,2,2,2],[2,1,2,2,2,2,2,1,2],[2,1,1,2,1,2,1,1,2],[2,2,2,2,2,2,2,2,2]]})}),define("pac-man/models/pac",["exports","pac-man/mixins/shared-stuff"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0})
var i=function(){return function(e,t){if(Array.isArray(e))return e
if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,r=!1,a=void 0
try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return i}(e,t)
throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()
e.default=Ember.Object.extend(t.default,{direction:"stopped",intent:"stopped",level:null,x:null,y:null,powerMode:Ember.computed.gt("powerModeTime",0),powerModeTime:0,maxPowerModeTime:400,timers:["powerModeTime"],color:Ember.computed("powerModeTime",function(){var e=this.get("powerModeTime")/this.get("maxPowerModeTime"),t={r:60,g:100,b:0},n={r:100,g:95,b:0},r=["r","g","b"].map(function(i){var r=t[i]*e+n[i]*(1-e)
return Math.round(r)}),a=i(r,3)
return"rgb("+a[0]+"%,"+a[1]+"%,"+a[2]+"%)"}),draw:function(){var e=this.get("x"),t=this.get("y")
this.drawCircle(e,t,2,this.get("direction"),this.get("color"))},changeDirection:function(){var e=this.get("intent")
this.pathBlockedInDirection(e)?this.set("direction","stopped"):this.set("direction",e)},pathBlockedInDirection:function(e){var t=this.cellTypeInDirection(e)
return Ember.isEmpty(t)||1===t},cellTypeInDirection:function(e){var t=this.nextCoordinate("x",e),i=this.nextCoordinate("y",e)
return this.get("level.layout."+i+"."+t)},modulo:function(e,t){return(e+t)%t},nextCoordinate:function(e,t){var i=this.get(e)+this.get("directions."+t+"."+e)
return this.get("level.teleport")?"up"==t||"down"==t?this.modulo(i,this.get("level.height")):this.modulo(i,this.get("level.width")):i},animationCompleted:function(){return this.get("frameCycle")==this.get("framesPerMovement")},finalizeMove:function(){var e=this.get("direction")
this.set("x",this.nextCoordinate("x",e)),this.set("y",this.nextCoordinate("y",e)),this.set("frameCycle",1)},tickTimers:function(){var e=this
this.get("timers").forEach(function(t){e.get(t)>0&&e.decrementProperty(t)})},move:function(){this.animationCompleted()?(this.finalizeMove(),this.changeDirection()):"stopped"==this.get("direction")?this.changeDirection():this.incrementProperty("frameCycle"),this.tickTimers()},restart:function(){this.set("x",this.get("level.startingPac.x")),this.set("y",this.get("level.startingPac.y")),this.set("frameCycle",0),this.set("direction","stopped")}})}),define("pac-man/models/teleport-level",["exports","pac-man/models/level"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default.extend({squareSize:60,layout:[[1,1,1,2,1,1,1,1,1],[1,2,2,2,2,2,2,1,1],[1,2,2,2,2,2,2,2,1],[1,2,2,1,1,1,2,2,1],[1,2,2,2,2,2,2,2,1],[1,2,1,2,1,2,1,2,1],[1,3,2,2,2,2,2,2,1],[1,1,1,2,1,1,1,1,1]],startingPac:{x:1,y:1},startingGhosts:[{x:6,y:6},{x:5,y:1}],teleport:!0,ghostRetreat:{x:4,y:3}})}),define("pac-man/resolver",["exports","ember-resolver"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t.default}),define("pac-man/router",["exports","pac-man/config/environment"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0})
var i=Ember.Router.extend({location:t.default.locationType,rootURL:t.default.rootURL})
i.map(function(){}),e.default=i}),define("pac-man/services/ajax",["exports","ember-ajax/services/ajax"],function(e,t){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.default}})}),define("pac-man/templates/application",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"WYSBmgUH",block:'{"symbols":[],"statements":[[1,[21,"pac-man"],false]],"hasEval":false}',meta:{moduleName:"pac-man/templates/application.hbs"}})}),define("pac-man/templates/components/pac-man",["exports"],function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=Ember.HTMLBars.template({id:"XQhb1IQ9",block:'{"symbols":[],"statements":[[7,"canvas"],[11,"id","myCanvas"],[12,"width",[23,["level","pixelWidth"]]],[12,"height",[23,["level","pixelHeight"]]],[9],[10],[0,"\\n"],[7,"br"],[9],[10],[0," Score: "],[1,[21,"score"],false],[0,"       Level: "],[1,[21,"levelNumber"],false],[0,"       Lives: "],[1,[21,"lives"],false],[0,"      \\n"],[4,"if",[[23,["pac","powerMode"]]],null,{"statements":[[0," PowerMode: "],[1,[23,["pac","powerModeTime"]],false],[0," "]],"parameters":[]},null]],"hasEval":false}',meta:{moduleName:"pac-man/templates/components/pac-man.hbs"}})}),define("pac-man/config/environment",[],function(){try{var e="pac-man/config/environment",t=document.querySelector('meta[name="'+e+'"]').getAttribute("content"),i={default:JSON.parse(unescape(t))}
return Object.defineProperty(i,"__esModule",{value:!0}),i}catch(t){throw new Error('Could not read config from meta tag with name "'+e+'".')}}),runningTests||require("pac-man/app").default.create({name:"pac-man",version:"0.0.0+8c60ef21"})
